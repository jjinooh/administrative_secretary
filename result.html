<!doctype html>
<html lang="ko">
<head>
Â  <meta charset="utf-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>ê²€ìƒ‰ê²°ê³¼ â€“ ë‚´ ì† ì•ˆì˜ í–‰ì •ë¹„ì„œ</title>
Â  <style>
Â  Â  :root { --border:#dadce0; --bg:#fffcf0; }
Â  Â  *{box-sizing:border-box; margin:0; padding:0;}
Â  Â  body{ background:var(--bg); font-family:-apple-system, "Noto Sans KR", sans-serif; color:#202124; margin:0; }

Â  Â  /* í—¤ë” */
Â  Â  header{
Â  Â  Â  position:sticky; top:0; z-index:10;
Â  Â  Â  background:var(--bg); border-bottom:1px solid #eee;
Â  Â  }
Â  Â  .header-inner{
Â  Â  Â  max-width:1080px; margin:0 auto; padding:12px 16px;
Â  Â  Â  display:flex; align-items:center; gap:14px; flex-wrap:wrap;
Â  Â  }
Â  Â  .logos{display:flex; align-items:center; gap:10px;}
Â  Â  .logos img{height:40px;}
Â  Â  .mainlogo{height:48px; transition:height .18s ease;}
    /* ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„: ê²€ìƒ‰ì°½ ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
Â  Â  .search-wrap{flex:1; display:flex; align-items:center; gap:10px; max-width:450px;} 
Â  Â  .bar{
Â  Â  Â  flex:1; display:flex; align-items:center; gap:10px;
Â  Â  Â  padding:8px 14px; background:#fff;
Â  Â  Â  border:1px solid var(--border); border-radius:24px;
Â  Â  }
Â  Â  .bar input{
Â  Â  Â  flex:1; border:0; outline:0; font-size:15px; background:transparent;
Â  Â  }
Â  Â  .bar button{
Â  Â  Â  padding:8px 14px; border:2px solid #000;
Â  Â  Â  background:#fff; border-radius:6px; cursor:pointer; transition:.2s;
Â  Â  }
Â  Â  .bar button:hover{background:#000;color:#fff;}
Â  Â  .actions{display:flex; gap:8px; flex-wrap:wrap;}
Â  Â  .btn{ padding:8px 12px; border:2px solid #000; background:#fff; border-radius:6px; cursor:pointer; font-size:14px; transition:.2s; }
Â  Â  .btn:hover{background:#000;color:#fff;}

Â  Â  /* ë‚´ìš© */
Â  Â  main{max-width:800px;margin:24px auto;padding:0 16px;}
Â  Â  .result-box{
Â  Â  Â  background:#fff; border:1px solid #ddd;
Â  Â  Â  border-radius:12px; padding:18px; position:relative;
Â  Â  Â  min-height:160px;
Â  Â  }
Â  Â  .qline{font-size:14px;color:#5f6368;margin-bottom:8px;}
Â  Â  .answer{white-space:pre-line;line-height:1.7; word-break:break-word;}

Â  Â  /* ì‹œì—° ë²„íŠ¼ */
Â  Â  .demo-buttons{ position:absolute; top:12px; right:12px; display:flex; gap:6px; }
Â  Â  .demo-btn{ padding:5px 10px; font-size:13px; border:1px solid #000; background:#fff; border-radius:6px; cursor:pointer; transition:.2s; }
Â  Â  .demo-btn:hover{background:#000;color:#fff;}

Â  Â  /* ë¡œë”© ìƒíƒœ */
Â  Â  .loading{ display:flex; align-items:center; gap:10px; padding:8px 0; }
Â  Â  .loading img{ width:90px; height:50px; display:block; }
Â  Â  .hidden{ display:none !important; }

Â  Â  /* ìºë¦­í„° (indexì™€ ë™ì¼í•œ ê·œì¹™ ì‚¬ìš© ê°€ëŠ¥) */
Â  Â  .chara-small{ position:fixed; bottom:12px; right:12px; width:180px; opacity:0.9; z-index:5; pointer-events:none; display:none; }

Â  Â  /* ë°˜ì‘í˜•: ëª¨ë°”ì¼ì—ì„œ ì¶•ì†Œ */
Â  Â  @media(max-width:768px){
Â  Â  Â  .header-inner{gap:8px;}
Â  Â  Â  .logos img{height:32px;}
Â  Â  Â  .mainlogo{height:40px;}
Â  Â  Â  .bar input{font-size:14px;}
Â  Â  Â  .btn{font-size:13px; padding:6px 10px;}
Â  Â  Â  .result-box{padding:14px;}
Â  Â  Â  .loading img{ width:90px; height:50px; } /* ìŠ¤í”¼ë„ˆ ì¶•ì†Œ */
Â  Â  Â  .chara-small{ width:70px; bottom:10px; right:8px; } /* ìºë¦­í„° ì¶•ì†Œ */
Â  Â  }

Â  Â  /* ë°ìŠ¤í¬í†±ì—ì„œ ë©”ì¸ë¡œê³ ë¥¼ ë” í¬ê²Œ ë³´ì´ê²Œ */
Â  Â  @media(min-width:1024px){
Â  Â  Â  .mainlogo{ height:64px; } /* ë³€ê²½: ë°ìŠ¤í¬í†±ì—ì„œ í¬ê²Œ */
Â  Â  }
Â  </style>
Â  </head>
<body>
Â  <header>
    <div class="header-inner">
      <a href="https://jjinooh.github.io/administrative_secretary/" class="logos" style="text-decoration:none;">
        <img src="sungnamlogo.png" class="seongnam" alt="ì„±ë‚¨ì‹œ ë¡œê³ " />
        <img src="mainlogo.jpg" class="mainlogo" alt="ë‚´ ì† ì•ˆì˜ í–‰ì •ë¹„ì„œ ë¡œê³ " />
      </a>

      <div class="search-wrap">
        <div class="bar">
          <input id="q" placeholder="ì˜ˆ) ìˆ˜ì˜ê³„ì•½ì€ ì–¼ë§ˆê¹Œì§€ ê°€ëŠ¥í•´?" />
          <button onclick="reSearch()">ê²€ìƒ‰</button>
        </div>
      </div>

      <div class="actions">
        <button class="btn" onclick="window.open('https://www.law.go.kr/LSW/main.html')">êµ­ê°€ë²•ë ¹ì •ë³´</button>
        <button class="btn" onclick="window.open('https://www.elis.go.kr/main')">ìì¹˜ë²•ê·œì •ë³´</button>
      </div>
    </div>
Â  </header>

Â  <main>
Â  Â  <div class="result-box">
Â  Â  Â  <div class="demo-buttons">
Â  Â  Â  Â  <button class="demo-btn" onclick="demo(1)">ì‹œì—°1</button>
Â  Â  Â  Â  <button class="demo-btn" onclick="demo(2)">ì‹œì—°2</button>
Â  Â  Â  </div>

Â  Â  Â  <div class="qline" id="qline"></div>

Â  Â  Â  <div id="loading" class="loading hidden" aria-live="polite">
Â  Â  Â  Â  <img src="pinkgreen1.gif" alt="ë¡œë”© ì¤‘">
Â  Â  Â  Â  <span>ğŸ”„ ì¡°íšŒ ì¤‘ì…ë‹ˆë‹¤â€¦</span>
Â  Â  Â  </div>

Â  Â  Â  <div class="answer" id="answer">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ê³  â€˜ê²€ìƒ‰â€™ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
Â  Â  </div>
Â  </main>

Â  <img src="pinkgreen1.gif" class="chara-small" alt="ì´ˆë­ì´" id="floatingChara">

Â  <script>
Â  Â  // ğŸ’¡ ì¤‘ìš”: ì´ URLì„ **ë³¸ì¸ì˜ Apps Script ì›¹ì•± URLë¡œ êµì²´**í•´ì•¼ í•©ë‹ˆë‹¤.
Â  Â  // ê¸°ì¡´ URL ìœ ì§€:
Â  Â  const ASK_ENDPOINT = 'https://script.google.com/macros/s/AKfycbzd_EABVzt49XDVzgyr0FI3ybwOSGrit77To0kh27RnOTnmBVLT_xgAXYItOZjKq7eT7g/exec';

Â  Â  const params = new URLSearchParams(location.search);
Â  Â  const initialQ = params.get('q') || '';
Â  Â  const $q = document.getElementById('q');
Â  Â  const $qline = document.getElementById('qline');
Â  Â  const $answer = document.getElementById('answer');
Â  Â  const $loading = document.getElementById('loading');
Â  Â  const $chara = document.getElementById('floatingChara');

Â  Â  if(initialQ){ $q.value = initialQ; fetchAnswer(initialQ); }

Â  Â  function reSearch(){
Â  Â  Â  const val = $q.value.trim();
Â  Â  Â  if(!val) return;
Â  Â  Â  // ì„œë¸Œê²½ë¡œì—ì„œ ë™ì‘í•˜ë„ë¡ ìƒëŒ€ê²½ë¡œ ì‚¬ìš©
Â  Â  Â  history.replaceState(null,'','result.html?q='+encodeURIComponent(val));
Â  Â  Â  fetchAnswer(val);
Â  Â  }

Â  Â  function demo(type){
Â  Â  Â  const text = (type===1) ? 'ìˆ˜ì˜ê³„ì•½ì€ ì–¼ë§ˆê¹Œì§€ ê°€ëŠ¥í•´?' : 'í˜‘ìƒì— ì˜í•œ ê³„ì•½ ì ˆì°¨ ì•Œë ¤ì¤˜';
Â  Â  Â  $q.value = text;
Â  Â  Â  history.replaceState(null,'','result.html?q='+encodeURIComponent(text));
Â  Â  Â  fetchAnswer(text);
Â  Â  }

Â  Â  function setLoading(isLoading){
Â  Â  Â  if(isLoading){
Â  Â  Â  Â  $loading.classList.remove('hidden');
Â  Â  Â  Â  $answer.classList.add('hidden');
Â  Â  Â  Â  // ìºë¦­í„° í‘œì‹œ(ì„ íƒ): ëª¨ë°”ì¼ì—ì„œëŠ” ìˆ¨ê¹€ CSSê°€ ì ìš©ë¨
Â  Â  Â  Â  $chara.style.display = 'block';
Â  Â  Â  }else{
Â  Â  Â  Â  $loading.classList.add('hidden');
Â  Â  Â  Â  $answer.classList.remove('hidden');
Â  Â  Â  Â  $chara.style.display = 'none';
Â  Â  Â  }
Â  Â  }

Â  Â  async function fetchAnswer(q){
Â  Â  Â  $qline.textContent = `ê²€ìƒ‰ì–´: â€œ${q}â€`;
Â  Â  Â  setLoading(true);
Â  Â  Â  try{
Â  Â  Â  Â  const res = await fetch(ASK_ENDPOINT, {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  headers: {'Content-Type':'application/json'},
Â  Â  Â  Â  Â  body: JSON.stringify({ question: q })
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  // HTTP ì‘ë‹µì´ ì •ìƒì´ ì•„ë‹ ê²½ìš° (ì˜ˆ: 404, 500 ë“±)
Â  Â  Â  Â  if(!res.ok){
Â  Â  Â  Â  Â  throw new Error(`Apps Script ì„œë²„ ì˜¤ë¥˜: HTTP ${res.status}`);
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Apps Scriptì—ì„œ ë°˜í™˜í•œ ì‘ë‹µ ë©”ì‹œì§€ ì²˜ë¦¬
Â  Â  Â  Â  const answerText = data?.answer || 'ë‹µë³€ì„ ìƒì„±í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ğŸ’¡ ì¤‘ìš”: API í‚¤ ì˜¤ë¥˜ ë©”ì‹œì§€ ë“±ì— ëŒ€í•œ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ê²½ê³ 
Â  Â  Â  Â  if(answerText.includes('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.') || answerText.startsWith('ì˜¤ë¥˜:')){
Â  Â  Â  Â  Â  $answer.style.color = 'red';
Â  Â  Â  Â  Â  $answer.textContent = 'âŒ ì‹œìŠ¤í…œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. Apps Scriptì˜ ë¡œê·¸ì™€ API í‚¤ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”. \n\n' + answerText;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  $answer.style.color = '#202124'; // ê¸°ë³¸ ìƒ‰ìƒìœ¼ë¡œ ë³µêµ¬
Â  Â  Â  Â  Â  $answer.textContent = answerText;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  }catch(e){
Â  Â  Â  Â  console.error(e);
Â  Â  Â  Â  // ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” íŒŒì‹± ì˜¤ë¥˜ ë°œìƒ ì‹œ
Â  Â  Â  Â  $answer.style.color = 'red';
Â  Â  Â  Â  $answer.textContent = `âŒ ë„¤íŠ¸ì›Œí¬ ë˜ëŠ” í†µì‹  ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. (ì½˜ì†” í™•ì¸) \nì—ëŸ¬: ${e.message}`;
Â  Â  Â  }finally{
Â  Â  Â  Â  setLoading(false);
Â  Â  Â  }
Â  Â  }

Â  Â  $q.addEventListener('keydown', e => { if(e.key==='Enter') reSearch(); });
Â  </script>
</body>
</html>
